CREATE DATABASE FCoopDB
Go
USE FCoopDB
Go

CREATE TABLE Clients (
	ClientID INT IDENTITY(1, 1) PRIMARY KEY,
	IDCardNum NVARCHAR(9) UNIQUE,
	Name NVARCHAR(20),
	Residence NVARCHAR(30),
	Address NVARCHAR(30),
	Email NVARCHAR(30),

	CONSTRAINT chk_Email 
	CHECK(Email LIKE '%_@__%.__%'),

	CONSTRAINT chk_IDCN 
	CHECK(LEN(IDCardNum) = 9)
)
Go

CREATE TABLE Contracts (
	ContractID NVARCHAR(8) PRIMARY KEY,
	Date DATE,
	Term INT,
	Plant NVARCHAR(20),
	AverageYield INT,

	CONSTRAINT chk_Term 
	CHECK(Term IN (3, 5)),

	CONSTRAINT chk_Price
	CHECK(AverageYield >= 0)
)
Go

CREATE TABLE Rents (
	Type INT PRIMARY KEY,
	Rent MONEY,

	CONSTRAINT chk_Type
	CHECK(Type IN (1, 2, 3)),
	
	CONSTRAINT chk_Rent
	CHECK(Rent IN (25, 35, 45))
)
Go

CREATE TABLE Plots (
	PlotID NVARCHAR(7) PRIMARY KEY,
	Location NVARCHAR(20),
	Municipality NVARCHAR(20),
	Type INT,
	Area DECIMAL(10,1),

	CONSTRAINT fk_Plots_Rents
	FOREIGN KEY(Type) REFERENCES Rents(Type)
)
Go

CREATE TABLE Deals (
	ContractID NVARCHAR(8) PRIMARY KEY,
	ClientID INT,
	PlotID NVARCHAR(7)

	CONSTRAINT fk_Deals_Clients
	FOREIGN KEY(ClientID) REFERENCES Clients(ClientID),

	CONSTRAINT fk_Deals_Contracts
	FOREIGN KEY(ContractID) REFERENCES Contracts(ContractID),

	CONSTRAINT fk_Deals_Plots
	FOREIGN KEY(PlotID) REFERENCES Plots(PlotID)
)
Go

INSERT INTO Clients (IDCardNum, Name, Residence, Address, Email) VALUES
    ('343121232',N'Галена Цветелинова',N'Провадия',N'ул. "Ивайло" № 23',N'gal3na.cv@abv.bg'),
    ('456789012',N'Ганка Владимирова',N'село Кривня',N'ул. "4-та" № 6',N'vladimirova.ga@gmail.com'),
    ('223455606',N'Димо Донев',N'село Петров дол',N'ул. "1-ва" № 23',N'donev_dimo@abv.bg'),
    ('123321123',N'Дичо Мерджанов',N'село Манастир',N'ул. "3-та" № 12',N'di4o_merj@abv.bg'),
    ('234765809',N'Дона Кирилова',N'село Венчан',N'до старото училище',N'd.kirilova@abv.bg'),
    ('786556455',N'Карамфилка Пенчева',N'Провадия',N'ул. "Бойчо Желев" № 14',N'pencheva.k.a@mail.bg'),
    ('110012337',N'Лиляна Иванова',N'село Кривня',N'ул. "23-та" № 4',N'lilito_77@abv.bg'),
    ('123456789',N'Михиал Иванов',N'Провадия',N'ул. "Янко Сакъзов" № 36',N'mihail.ivanov68@abv.bg'),
    ('222333232',N'Мюмюн Кашмер',N'село Венчан',N'до кметството',N'mumun_kash@gmail.com'),
    ('234567890',N'Панайот Владигеров',N'Провадия',N'ул. "Дунав" № 17',N'pan40.vlad@mail.bg'),
    ('770545012',N'Славчо Трифчев',N'село Кривня',N'ул. "13-та" № 5',NULL),
    ('909111023',N'Фикрет Сунай',N'Провадия',N'ул. "Синчец" № 3 Б',N'fiki_sun@gmail.com'),
    ('345404545',N'Филчо Писарски',N'село Златина',N'до църквата',N'writer_phill@abv.bg')

INSERT INTO Contracts VALUES
    (N'Д-001-06','2006-09-20 00:00:00',5,N'Соя',220),
    (N'Д-002-07','2007-09-17 00:00:00',3,N'Пшеница',300),
    (N'Д-003-07','2007-09-30 00:00:00',5,N'Царевица',500),
    (N'Д-004-08','2008-09-23 00:00:00',5,N'Пшеница',300),
    (N'Д-005-09','2009-09-11 00:00:00',5,N'Картофи',1500),
    (N'Д-006-09','2009-09-24 00:00:00',5,N'Царевица',500),
    (N'Д-007-10','2010-09-28 00:00:00',5,N'Соя',220),
    (N'Д-008-10','2010-10-11 00:00:00',5,N'Картофи',1500),
    (N'Д-009-11','2011-09-17 00:00:00',5,N'Картофи',1500),
    (N'Д-010-11','2011-09-20 00:00:00',5,N'Ечемик',270),
    (N'Д-011-12','2012-09-30 00:00:00',5,N'Пшеница',300),
    (N'Д-012-12','2012-10-03 00:00:00',5,N'Царевица',500),
    (N'Д-013-12','2012-10-04 00:00:00',5,N'Слънчоглед',240),
    (N'Д-014-13','2013-09-21 00:00:00',5,N'Царевица',500),
    (N'Д-015-13','2013-09-23 00:00:00',5,N'Соя',220),
    (N'Д-016-13','2013-09-30 00:00:00',5,N'Слънчоглед',240),
    (N'Д-017-13','2013-10-01 00:00:00',5,N'Соя',220),
    (N'Д-018-14','2014-09-11 00:00:00',3,N'Просо',240),
    (N'Д-019-14','2014-09-14 00:00:00',5,N'Слънчоглед',240),
    (N'Д-020-14','2014-09-24 00:00:00',3,N'Ечемик',270),
    (N'Д-021-14','2014-10-02 00:00:00',5,N'Слънчоглед',240),
    (N'Д-022-15','2015-09-21 00:00:00',5,N'Слънчоглед',240),
    (N'Д-023-15','2015-09-28 00:00:00',5,N'Картофи',1500),
    (N'Д-024-15','2015-10-12 00:00:00',5,N'Соя',220),
    (N'Д-025-16','2016-09-09 00:00:00',3,N'Соя',220),
    (N'Д-026-16','2016-09-11 00:00:00',3,N'Соя',220),
    (N'Д-027-16','2016-09-15 00:00:00',5,N'Боб',200),
    (N'Д-028-16','2016-09-17 00:00:00',3,N'Боб',200),
    (N'Д-029-17','2017-09-11 00:00:00',5,N'Боб',200),
    (N'Д-030-17','2017-09-24 00:00:00',5,N'Слънчоглед',240),
    (N'Д-031-17','2017-10-01 00:00:00',3,N'Боб',200),
    (N'Д-032-17','2017-10-03 00:00:00',5,N'Ечемик',270),
    (N'Д-033-18','2018-09-04 00:00:00',3,N'Царевица',500),
    (N'Д-034-18','2018-09-23 00:00:00',5,N'Пшеница',300),
    (N'Д-035-18','2018-09-28 00:00:00',3,N'Боб',200),
    (N'Д-036-18','2018-09-30 00:00:00',3,N'Пшеница',300),
    (N'Д-037-18','2018-10-01 00:00:00',3,N'Боб',200),
    (N'Д-038-18','2018-10-01 00:00:00',3,N'Боб',200),
    (N'Д-039-19','2019-09-09 00:00:00',3,N'Просо',240),
    (N'Д-040-19','2019-09-11 00:00:00',3,N'Ечемик',270),
    (N'Д-041-19','2019-09-13 00:00:00',3,N'Картофи',1500),
    (N'Д-042-19','2019-09-14 00:00:00',3,N'Пшеница',300),
    (N'Д-043-19','2019-09-16 00:00:00',3,N'Картофи',1500),
    (N'Д-044-19','2019-10-02 00:00:00',5,N'Царевица',500),
    (N'Д-045-20','2020-09-23 00:00:00',5,N'Царевица',500),
    (N'Д-046-20','2020-09-27 00:00:00',3,N'Ечемик',270),
    (N'Д-047-20','2020-09-28 00:00:00',5,N'Соя',220),
    (N'Д-048-20','2020-10-01 00:00:00',3,N'Просо',240),
    (N'Д-049-21','2021-09-04 00:00:00',3,N'Пшеница',300),
    (N'Д-050-21','2021-09-16 00:00:00',3,N'Царевица',500),
    (N'Д-051-21','2021-09-28 00:00:00',5,N'Слънчоглед',240),
    (N'Д-052-21','2021-10-01 00:00:00',5,N'Царевица',500)

INSERT INTO Rents VALUES
    (1,45),
    (2,35),
    (3,25)

INSERT INTO Plots VALUES
    (N'К-00203',N'Кривня',N'Провадия',2,4),
    (N'К-00334',N'Кривня',N'Провадия',1,1.5),
    (N'К-01003',N'Кривня',N'Провадия',1,3),
    (N'В-12345',N'Венчан',N'Провадия',1,4),
    (N'З-04315',N'Златина',N'Провадия',3,10),
    (N'Т-03033',N'Тутраканци',N'Провадия',1,3.5),
    (N'К-00310',N'Кривня',N'Провадия',2,5),
    (N'К-00189',N'Кривня',N'Провадия',3,6),
    (N'Ф-00101',N'Фазанарията',N'Провадия',3,12),
    (N'П-00919',N'Петров дол',N'Провадия',1,4),
    (N'П-01334',N'Петров дол',N'Провадия',1,3),
    (N'П-02002',N'Петров дол',N'Провадия',1,5),
    (N'М-02123',N'Манастир',N'Провадия',2,5),
    (N'З-11202',N'Златина',N'Провадия',1,4.5),
    (N'К-00421',N'Кривня',N'Провадия',1,2),
    (N'М-11332',N'Манастир',N'Провадия',1,3),
    (N'П-02108',N'Петров дол',N'Провадия',2,8),
    (N'Ф-00023',N'Фазанарията',N'Провадия',2,6),
    (N'В-33145',N'Венчан',N'Провадия',2,7),
    (N'М-00313',N'Манастир',N'Провадия',2,5),
    (N'К-00123',N'Кривня',N'Провадия',3,8),
    (N'В-34567',N'Венчан',N'Провадия',1,5),
    (N'К-00173',N'Кривня',N'Провадия',2,8),
    (N'М-11405',N'Манастир',N'Провадия',3,7),
    (N'П-02034',N'Петров дол',N'Провадия',2,5),
    (N'К-01011',N'Кривня',N'Провадия',1,4)

INSERT INTO Deals VALUES
    (N'Д-001-06',2,N'К-00203'),
    (N'Д-002-07',11,N'К-00334'),
    (N'Д-003-07',6,N'К-01003'),
    (N'Д-004-08',5,N'В-12345'),
    (N'Д-005-09',13,N'З-04315'),
    (N'Д-006-09',1,N'Т-03033'),
    (N'Д-007-10',2,N'К-00310'),
    (N'Д-008-10',7,N'К-00189'),
    (N'Д-009-11',12,N'Ф-00101'),
    (N'Д-010-11',2,N'К-00203'),
    (N'Д-011-12',6,N'К-01003'),
    (N'Д-012-12',3,N'П-00919'),
    (N'Д-013-12',3,N'П-01334'),
    (N'Д-014-13',11,N'К-00334'),
    (N'Д-015-13',5,N'В-12345'),
    (N'Д-016-13',8,N'П-02002'),
    (N'Д-017-13',4,N'М-02123'),
    (N'Д-018-14',13,N'З-04315'),
    (N'Д-019-14',13,N'З-11202'),
    (N'Д-020-14',1,N'Т-03033'),
    (N'Д-021-14',7,N'К-00421'),
    (N'Д-022-15',4,N'М-11332'),
    (N'Д-023-15',2,N'К-00310'),
    (N'Д-024-15',8,N'П-02108'),
    (N'Д-025-16',12,N'Ф-00023'),
    (N'Д-026-16',9,N'В-33145'),
    (N'Д-027-16',1,N'М-00313'),
    (N'Д-028-16',12,N'Ф-00101'),
    (N'Д-029-17',13,N'З-04315'),
    (N'Д-030-17',1,N'Т-03033'),
    (N'Д-031-17',2,N'К-00123'),
    (N'Д-032-17',3,N'П-00919'),
    (N'Д-033-18',5,N'В-34567'),
    (N'Д-034-18',5,N'В-12345'),
    (N'Д-035-18',11,N'К-00173'),
    (N'Д-036-18',8,N'П-02002'),
    (N'Д-037-18',7,N'К-00189'),
    (N'Д-038-18',4,N'М-02123'),
    (N'Д-039-19',12,N'Ф-00023'),
    (N'Д-040-19',9,N'В-33145'),
    (N'Д-041-19',10,N'М-11405'),
    (N'Д-042-19',13,N'З-11202'),
    (N'Д-043-19',3,N'П-02034'),
    (N'Д-044-19',7,N'К-00421'),
    (N'Д-045-20',4,N'М-11332'),
    (N'Д-046-20',6,N'К-01011'),
    (N'Д-047-20',2,N'К-00310'),
    (N'Д-048-20',2,N'К-00123'),
    (N'Д-049-21',5,N'В-34567'),
    (N'Д-050-21',1,N'М-00313'),
    (N'Д-051-21',11,N'К-00173'),
    (N'Д-052-21',8,N'П-02002');







